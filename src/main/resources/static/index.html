<!--<!doctype html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--<meta charset="utf-8" />-->
<!--<meta http-equiv="X-UA-Compatible" content="IE=edge" />-->
<!--<title>Demo</title>-->
<!--<meta name="description" content="" />-->
<!--<meta name="viewport" content="width=device-width" />-->
<!--<base href="/" />-->
<!--<link rel="stylesheet" type="text/css"-->
	<!--href="/webjars/bootstrap/css/bootstrap.min.css" />-->
<!--<script type="text/javascript" src="/webjars/jquery/jquery.min.js"></script>-->
<!--<script type="text/javascript"-->
	<!--src="/webjars/bootstrap/js/bootstrap.min.js"></script>-->
<!--</head>-->
<!--<body ng-app="app" ng-controller="home as home">-->
	<!--<h1>Login</h1>-->
	<!--<div class="container" ng-show="!home.authenticated">-->
		<!--With Fitbit: <a href="/login">click here</a>-->
	<!--</div>-->
	<!--<div class="container" ng-show="home.authenticated">-->
		<!--<div class="container authenticated">-->
			<!--Logged in as: <span id="user"></span>-->
			<!--<div>-->
				<!--<button onClick="logout()" class="btn btn-primary">Logout</button>-->
			<!--</div>-->
		<!--</div>-->
		<!--Logged in as: <span ng-bind="home.user"></span><br />-->
		<!--Lifetime Steps: <span ng-bind="home.lifetimeSteps"></span><br />-->
		<!--Lifetime Distance: <span ng-bind="home.lifetimeDistance"></span><br />-->
		<!--Lifetime Floors: <span ng-bind="home.lifetimeFloors"></span><br />-->
	<!--</div>-->
	<!--<script type="text/javascript" src="/webjars/angularjs/angular.min.js"></script>-->
	<!--<script type="text/javascript">-->
		<!--angular.module("app", []).controller("home", function($http) {-->
			<!--var self = this;-->

			<!--$http.get("/user").success(function(data) {-->
				<!--self.user = data.userAuthentication.details.user.fullName;-->
				<!--self.authenticated = true;-->
			<!--}).error(function() {-->
				<!--self.user = "N/A";-->
				<!--self.authenticated = false;-->
			<!--});-->

			<!--$http.get("/lifetime-activity").success(function(data) {-->
				<!--self.lifetimeSteps = data.steps.toLocaleString();-->
				<!--self.lifetimeFloors = data.floors.toLocaleString();-->
				<!--self.lifetimeDistance = data.distance.toLocaleString();-->
			<!--}).error(function() {-->
				<!--self.lifetimeSteps = "N/A";-->
			<!--});-->


            <!--$http.get("/lifetime-activity1").success(function(data) {-->
                <!--self.lifetimeSteps = data.steps.toLocaleString();-->
                <!--self.lifetimeFloors = data.floors.toLocaleString();-->
                <!--self.lifetimeDistance = data.distance.toLocaleString();-->
            <!--}).error(function() {-->
                <!--self.lifetimeSteps = "N/A";-->
            <!--});-->

            <!--var logout = function() {-->
                <!--$http.post("/logout", function () {-->
                    <!--$("#user").html('');-->
                    <!--$(".unauthenticated").show();-->
                    <!--$(".authenticated").hide();-->
                    <!--echo("hi guys");-->
                <!--})-->
                <!--return true;-->
            <!--}-->
		<!--});-->
	<!--</script>-->
<!--</body>-->
<!--</html>-->

<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8"/>
	<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
	<title>Demo</title>
	<meta name="description" content=""/>
	<meta name="viewport" content="width=device-width"/>
	<base href="/"/>
	<link rel="stylesheet" type="text/css" href="/webjars/bootstrap/css/bootstrap.min.css"/>
	<script type="text/javascript" src="/webjars/jquery/jquery.min.js"></script>
	<script type="text/javascript" src="/webjars/bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="/webjars/js-cookie/js.cookie.js"></script>
</head>
<body ng-app="app" ng-controller="home as home">
<h1>Demo</h1>
<div class="container"></div>
<div class="container unauthenticated">
	With Facebook: <a href="/login">click here</a>
</div>
<div class="container authenticated">
	Logged in as: <span id="user"></span>
	<div>
		<button onClick="logout()" class="btn btn-primary">Logout</button>
	</div>
</div>
<script type="text/javascript">
    angular.module("app", []).controller("home", function($http) {
        $http.get("/user", function(data) {
        $("#user").html(data.userAuthentication.details.name);
        $(".unauthenticated").hide()
        $(".authenticated").show()
    });


    // var logout = function() {
        $http.post("/logout", function() {
            $("#user").html('');
            $(".unauthenticated").show();
            $(".authenticated").hide();
        })
        // return true;
    // }

    $.ajaxSetup({
        beforeSend : function(xhr, settings) {
            if (settings.type == 'POST' || settings.type == 'PUT'
                || settings.type == 'DELETE') {
                if (!(/^http:.*/.test(settings.url) || /^https:.*/
                        .test(settings.url))) {
                    // Only send the token to relative URLs i.e. locally.
                    xhr.setRequestHeader("X-XSRF-TOKEN",
                        Cookies.get('XSRF-TOKEN'));
                }
            }
        }
    });
    })
</script>
</body>
</html>
